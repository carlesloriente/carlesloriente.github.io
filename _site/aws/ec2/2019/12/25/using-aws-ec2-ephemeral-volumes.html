<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    Using ephemeral volumes in EC2 - Notes on cloud infrastructure
    
  </title>

  <meta name="description" content="In some of the AWS EC2 instances you can use an ephemeral volume, be careful with the data you plan to store in it, when the instance is restarted, stopped o...">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/assets/vendor/bootstrap/css/bootstrap.min.css">

  <link rel="stylesheet" href="/assets/vendor/fontawesome-free/css/all.min.css">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/aws/ec2/2019/12/25/using-aws-ec2-ephemeral-volumes.html">
  <link rel="alternate" type="application/rss+xml" title="Notes on cloud infrastructure" href="/feed.xml">

</head>


<body>

  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">Notes on cloud infrastructure</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/posts">Posts</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/contact">Contact</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->

<header class="masthead" style="background-image: url('/assets/images/aws_logo.jpg')">
  
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
            <h1>Using ephemeral volumes in EC2</h1>
            
            <span class="meta">Posted by
              <a href="#">Carles Loriente</a>
              on December 25, 2019 &middot; <span class="reading-time" title="Estimated read time">
  
   1 min  read </span>

            </span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">

        <p>In some of the AWS EC2 instances you can use an ephemeral volume, be careful with the data you plan to store in it, when the instance is restarted, stopped or terminated all the data is permanently deleted</p>

<p>You can check the (https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/InstanceStorage.html “complete list”) of EC2 instances with ephemeral volumes and his types.</p>

<p>Some of them will require to install an additinal package to use it.</p>

<p>For this example we are going to launch a g4dn.xlarge with CentOS 7 using the AWS Console, as you can see in “Step 7: Review Instance Launch”</p>

<p><img src="/assets/images/instance-storage-disk.jpg" alt="Storage" /></p>

<p>There are two volumes, one EBS and one Ephemeral.</p>

<p>Connect to the instance using SSH and use the df-h command to view the volumes that are formatted and mounted.</p>

<p><img src="/assets/images/df-h.jpg" alt="df -h" /></p>

<p>Use the lsblk to view any volumes that were mapped at launch but not formatted and mounted</p>

<p><img src="/assets/images/lsblk.jpg" alt="lsblk" /></p>

<p>As you can see, the name of the ephemeral volume is nvme1n1, so we can move forward and format and mount it, but before that we are going to install the package nvme-cli.</p>

<noscript><pre>400: Invalid request
</pre></noscript>
<script src="https://gist.github.com/5dbd6acf64090bba9593146185c11183.js"> </script>

<p>Now we can use the ephemeral storage mounted at /mnt/ephemeral, e.g: for swapping/caching purposes (don’t to do that on EBS Volumes, cost and IOPS will be affected).</p>


        <hr>

        <div class="clearfix">

          
            
                <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'http://localhost:4000/aws/ec2/2019/12/25/using-aws-ec2-ephemeral-volumes.html';
      this.page.identifier = 'notes-on-cloud-infrastructure';
    };
    (function() {
      var d = document, s = d.createElement('script');
      s.src = 'https://notes-on-cloud-infrastructure.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
            
          

          
          <a class="btn btn-primary float-left" href="/fedora/msi/2019/12/23/fedora-fix-touchpad-msi-prestige.html" data-toggle="tooltip" data-placement="top" title="Fedora Fix touchpad MSI Prestige">&larr; Previous<span class="d-none d-md-inline">
              Post</span></a>
          
          
          <a class="btn btn-primary float-right" href="/linux/swap/2019/12/26/create-swap-file.html" data-toggle="tooltip" data-placement="top" title="Create swap file in linux">Next<span class="d-none d-md-inline">
              Post</span> &rarr;</a>
          

        </div>

      </div>
    </div>
  </div>


  <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:mjvgwpej">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://twitter.com/godarthvader">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          <li class="list-inline-item">
            <a href="https://www.linkedin.com/in/carles-loriente">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://github.com/carlesloriente">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="copyright text-muted">Copyright &copy; Carles Loriente 2019</p>
      </div>
    </div>
  </div>
</footer>


  <script src="/assets/vendor/jquery/jquery.min.js"></script>
<script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script>

<script src="/assets/scripts.js"></script>




  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-147965228-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-147965228-1');
</script>



</body>

</html>
